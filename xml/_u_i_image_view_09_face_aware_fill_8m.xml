<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.9.1">
  <compounddef id="_u_i_image_view_09_face_aware_fill_8m" kind="file" language="Objective-C">
    <compoundname>UIImageView+FaceAwareFill.m</compoundname>
    <includes refid="_u_i_image_view_09_face_aware_fill_8h" local="yes">UIImageView+FaceAwareFill.h</includes>
    <includes local="no">CoreImage/CoreImage.h</includes>
    <includes local="no">QuartzCore/QuartzCore.h</includes>
    <incdepgraph>
      <node id="1630">
        <label>CoreImage/CoreImage.h</label>
      </node>
      <node id="1629">
        <label>UIKit/UIKit.h</label>
      </node>
      <node id="1628">
        <label>UIImageView+FaceAwareFill.h</label>
        <link refid="_u_i_image_view_09_face_aware_fill_8h"/>
        <childnode refid="1629" relation="include">
        </childnode>
      </node>
      <node id="1627">
        <label>XDCommonLib/CommonBasicComponentLayer/Categories/UIKit/UIImageView/UIImageView+FaceAwareFill.m</label>
        <link refid="UIImageView+FaceAwareFill.m"/>
        <childnode refid="1628" relation="include">
        </childnode>
        <childnode refid="1630" relation="include">
        </childnode>
        <childnode refid="1631" relation="include">
        </childnode>
      </node>
      <node id="1631">
        <label>QuartzCore/QuartzCore.h</label>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="_u_i_image_view_09_face_aware_fill_8m_1a57a0f5adc125e0b3ad7c766e8db75aa6" prot="public" static="yes" mutable="no">
        <type>CIDetector *</type>
        <definition>CIDetector* _faceDetector</definition>
        <argsstring></argsstring>
        <name>_faceDetector</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/suxinde/XDCommonLib/XDCommonLib/CommonBasicComponentLayer/Categories/UIKit/UIImageView/UIImageView+FaceAwareFill.m" line="14" column="1" bodyfile="/Users/suxinde/XDCommonLib/XDCommonLib/CommonBasicComponentLayer/Categories/UIKit/UIImageView/UIImageView+FaceAwareFill.m" bodystart="14" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>UIImageView+UIImageView_FaceAwareFill.m</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>faceAwarenessClipping</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>Created<sp/>by<sp/>Julio<sp/>Andrés<sp/>Carrettoni<sp/>on<sp/>03/02/13.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>Copyright<sp/>(c)<sp/>2013<sp/>Julio<sp/>Andrés<sp/>Carrettoni.<sp/>All<sp/>rights<sp/>reserved.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#import<sp/>&quot;<ref refid="_u_i_image_view_09_face_aware_fill_8h" kindref="compound">UIImageView+FaceAwareFill.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#import<sp/>&lt;CoreImage/CoreImage.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#import<sp/>&lt;QuartzCore/QuartzCore.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>CIDetector*<sp/>_faceDetector;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="category_u_i_image_view_07_face_aware_fill_08" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">@implementation<sp/></highlight><highlight class="normal"><ref refid="category_u_i_image_view_07_face_aware_fill_08" kindref="compound">UIImageView (FaceAwareFill)</ref></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal">+<sp/>(void)initialize</highlight></codeline>
<codeline lineno="20"><highlight class="normal">{</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/>_faceDetector<sp/>=<sp/>[CIDetector<sp/>detectorOfType:CIDetectorTypeFace</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>context:nil</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options:@{CIDetectorAccuracy:CIDetectorAccuracyLow}];</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="25"><highlight class="normal">}</highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="comment">//<sp/>based<sp/>on<sp/>this:<sp/>http://maniacdev.com/2011/11/tutorial-easy-face-detection-with-core-image-in-ios-5/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28" refid="category_u_i_image_view_07_face_aware_fill_08_1a7e48ecc33cd4dfbdab5c9e8c48cd3b79" refkind="member"><highlight class="normal">-<sp/>(void)<sp/><ref refid="category_u_i_image_view_07_face_aware_fill_08_1a7e48ecc33cd4dfbdab5c9e8c48cd3b79" kindref="member">faceAwareFill</ref><sp/>{</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Safe<sp/>check!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">self</highlight><highlight class="normal">.image<sp/>==<sp/>nil)<sp/>{</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>CGRect<sp/>facesRect<sp/>=<sp/>[</highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>rectWithFaces];</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(facesRect.size.height<sp/>+<sp/>facesRect.size.width<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.contentMode<sp/>=<sp/>UIViewContentModeTopLeft;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>[</highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>scaleImageFocusingOnRect:facesRect];</highlight></codeline>
<codeline lineno="39"><highlight class="normal">}</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal">-<sp/>(CGRect)<sp/>rectWithFaces<sp/>{</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Get<sp/>a<sp/>CIIImage</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/>CIImage*<sp/>image<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.CIImage;</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>If<sp/>now<sp/>available<sp/>we<sp/>create<sp/>one<sp/>using<sp/>the<sp/>CGImage</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!image)<sp/>{</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image<sp/>=<sp/>[CIImage<sp/>imageWithCGImage:self.image.CGImage];</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Use<sp/>the<sp/>static<sp/>CIDetector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>CIDetector*<sp/>detector<sp/>=<sp/>_faceDetector;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>an<sp/>array<sp/>containing<sp/>all<sp/>the<sp/>detected<sp/>faces<sp/>from<sp/>the<sp/>detector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/>NSArray*<sp/>features<sp/>=<sp/>[detector<sp/>featuresInImage:image];</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>we&apos;ll<sp/>iterate<sp/>through<sp/>every<sp/>detected<sp/>face.<sp/>CIFaceFeature<sp/>provides<sp/>us</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>with<sp/>the<sp/>width<sp/>for<sp/>the<sp/>entire<sp/>face,<sp/>and<sp/>the<sp/>coordinates<sp/>of<sp/>each<sp/>eye</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>and<sp/>the<sp/>mouth<sp/>if<sp/>detected.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>CGRect<sp/>totalFaceRects<sp/>=<sp/>CGRectMake(</highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.size.width/2.0,<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.size.height/2.0,<sp/>0,<sp/>0);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(features.count<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//We<sp/>get<sp/>the<sp/>CGRect<sp/>of<sp/>the<sp/>first<sp/>detected<sp/>face</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>totalFaceRects<sp/>=<sp/>((CIFaceFeature*)[features<sp/>objectAtIndex:0]).bounds;</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Now<sp/>we<sp/>find<sp/>the<sp/>minimum<sp/>CGRect<sp/>that<sp/>holds<sp/>all<sp/>the<sp/>faces</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(CIFaceFeature*<sp/>faceFeature<sp/>in<sp/>features)<sp/>{</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>totalFaceRects<sp/>=<sp/>CGRectUnion(totalFaceRects,<sp/>faceFeature.bounds);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//So<sp/>now<sp/>we<sp/>have<sp/>either<sp/>a<sp/>CGRect<sp/>holding<sp/>the<sp/>center<sp/>of<sp/>the<sp/>image<sp/>or<sp/>all<sp/>the<sp/>faces.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>totalFaceRects;</highlight></codeline>
<codeline lineno="73"><highlight class="normal">}</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal">-<sp/>(void)<sp/>scaleImageFocusingOnRect:(CGRect)<sp/>facesRect<sp/>{</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>CGFloat<sp/>multi1<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.frame.size.width<sp/>/<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.size.width;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>CGFloat<sp/>multi2<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.frame.size.height<sp/>/<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.size.height;</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>CGFloat<sp/>multi<sp/>=<sp/>MAX(multi1,<sp/>multi2);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//We<sp/>need<sp/>to<sp/>&apos;flip&apos;<sp/>the<sp/>Y<sp/>coordinate<sp/>to<sp/>make<sp/>it<sp/>match<sp/>the<sp/>iOS<sp/>coordinate<sp/>system<sp/>one</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>facesRect.origin.y<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.size.height<sp/>-<sp/>facesRect.origin.y<sp/>-<sp/>facesRect.size.height;</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>facesRect<sp/>=<sp/>CGRectMake(facesRect.origin.x*multi,<sp/>facesRect.origin.y*multi,<sp/>facesRect.size.width*multi,<sp/>facesRect.size.height*multi);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>CGRect<sp/>imageRect<sp/>=<sp/>CGRectZero;</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>imageRect.size.width<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.size.width<sp/>*<sp/>multi;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>imageRect.size.height<sp/>=<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image.size.height<sp/>*<sp/>multi;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>imageRect.origin.x<sp/>=<sp/>MIN(0.0,<sp/>MAX(-facesRect.origin.x<sp/>+<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.frame.size.width/2.0<sp/>-<sp/>facesRect.size.width/2.0,<sp/>-imageRect.size.width<sp/>+<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.frame.size.width));</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>imageRect.origin.y<sp/>=<sp/>MIN(0.0,<sp/>MAX(-facesRect.origin.y<sp/>+<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.frame.size.height/2.0<sp/>-facesRect.size.height/2.0,<sp/>-imageRect.size.height<sp/>+<sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.frame.size.height));</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/>imageRect<sp/>=<sp/>CGRectIntegral(imageRect);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>UIGraphicsBeginImageContextWithOptions(imageRect.size,<sp/>YES,<sp/>2.0);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>[</highlight><highlight class="keyword">self</highlight><highlight class="normal">.image<sp/>drawInRect:imageRect];</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>UIImage*<sp/>newImage<sp/>=<sp/>UIGraphicsGetImageFromCurrentImageContext();</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>UIGraphicsEndImageContext();</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">.image<sp/>=<sp/>newImage;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//This<sp/>is<sp/>to<sp/>show<sp/>the<sp/>red<sp/>rectangle<sp/>over<sp/>the<sp/>faces</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#ifdef<sp/>DEBUGGING_FACE_AWARE_FILL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NSInteger<sp/>theRedRectangleTag<sp/>=<sp/>-3312;</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>UIView*<sp/>facesRectLine<sp/>=<sp/>[</highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>viewWithTag:theRedRectangleTag];</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!facesRectLine)<sp/>{</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facesRectLine<sp/>=<sp/>[[UIView<sp/>alloc]<sp/>initWithFrame:facesRect];</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facesRectLine.tag<sp/>=<sp/>theRedRectangleTag;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facesRectLine.frame<sp/>=<sp/>facesRect;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facesRectLine.backgroundColor<sp/>=<sp/>[UIColor<sp/>clearColor];</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facesRectLine.layer.borderColor<sp/>=<sp/>[UIColor<sp/>redColor].CGColor;</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facesRectLine.layer.borderWidth<sp/>=<sp/>4.0;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>CGRect<sp/>frame<sp/>=<sp/>facesRectLine.frame;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frame.origin.x<sp/>=<sp/>imageRect.origin.x<sp/>+<sp/>frame.origin.x;</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>frame.origin.y<sp/>=<sp/>imageRect.origin.y<sp/>+<sp/>frame.origin.y;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>facesRectLine.frame<sp/>=<sp/>frame;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[</highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>addSubview:facesRectLine];</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/><sp/><sp/>#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="123"><highlight class="normal">}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight><highlight class="keyword">@end</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/Users/suxinde/XDCommonLib/XDCommonLib/CommonBasicComponentLayer/Categories/UIKit/UIImageView/UIImageView+FaceAwareFill.m"/>
  </compounddef>
</doxygen>
